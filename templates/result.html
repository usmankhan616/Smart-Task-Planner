{% if plan.error %}
    <div class="bg-red-900/50 p-6 rounded-xl shadow-lg border border-red-700 text-center animate-fade-in">
        <h2 class="text-2xl font-bold text-red-300">Generation Failed</h2>
        <p class="mt-2 text-red-400">{{ plan.error }}</p>
    </div>
{% else %}
    <div class="bg-slate-800/50 p-6 sm:p-8 rounded-xl shadow-2xl border border-slate-700 animate-fade-in">
        <h2 class="text-3xl font-bold mb-6 bg-gradient-to-r from-sky-400 to-cyan-300 bg-clip-text text-transparent">Your Action Plan</h2>
        
        <div class="space-y-4">
            {% for task in plan.plan %}
            <div class="p-4 bg-slate-800 rounded-lg border border-slate-700 transition-all hover:border-sky-500 hover:bg-slate-700/50">
                <div class="flex flex-col sm:flex-row justify-between sm:items-center">
                    <h3 class="text-lg font-semibold text-sky-300">{{ task.taskName }}</h3>
                    <div class="flex items-center space-x-3 mt-2 sm:mt-0 text-xs">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full font-medium bg-cyan-900 text-cyan-300">
                            {{ task.phase }}
                        </span>
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full font-medium bg-slate-700 text-slate-300">
                            Priority: {{ task.priority }}
                        </span>
                    </div>
                </div>
                <p class="mt-2 text-sm text-slate-400">{{ task.description }}</p>
                <div class="mt-3 pt-3 border-t border-slate-700 flex flex-col sm:flex-row text-xs text-slate-500 space-y-1 sm:space-y-0 sm:space-x-6">
                    <span><strong>Duration:</strong> {{ task.duration }}</span>
                    <span><strong>Dependencies:</strong> {{ task.dependencies if task.dependencies else 'None' }}</span>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
{% endif %}

<style>
    @keyframes fade-in {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in {
        animation: fade-in 0.5s ease-out forwards;
    }
</style>